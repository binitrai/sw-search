(this["webpackJsonpsw-search"]=this["webpackJsonpsw-search"]||[]).push([[0],{15:function(e,t,a){e.exports={SideDrawer:"SideDrawer_SideDrawer__3kXLK",Open:"SideDrawer_Open__1tCv1",Close:"SideDrawer_Close__9j7x-",Logo:"SideDrawer_Logo__3voUv"}},24:function(e,t,a){e.exports={Toolbar:"Toolbar_Toolbar__ApScI",Logo:"Toolbar_Logo__3Lk47",DesktopOnly:"Toolbar_DesktopOnly__LuPaL"}},25:function(e,t,a){e.exports={Main:"Login_Main__28eWZ",SignInText:"Login_SignInText__3L1Md",error:"Login_error__2Pv-g"}},29:function(e,t,a){e.exports={NavigationItem:"NavigationItem_NavigationItem__2SpXc",active:"NavigationItem_active__2v2td"}},33:function(e,t,a){e.exports={inputStyle:"Input_inputStyle__10vuk",inputStyleFlat:"Input_inputStyleFlat__WbgiA"}},34:function(e,t,a){e.exports={Button:"Button_Button__3gFiX",Success:"Button_Success__2Rka1",Danger:"Button_Danger__2ogZq",Rounded:"Button_Rounded__1ILJD",AutoWidth:"Button_AutoWidth__2Yb9w"}},35:function(e,t,a){e.exports={InfoWrapper:"PlanetInfo_InfoWrapper__37RBR"}},36:function(e,t,a){e.exports={Search:"Search_Search__2SQmI"}},37:function(e,t,a){e.exports={SearchResult:"SearchResult_SearchResult__utLcf",MoreContainer:"SearchResult_MoreContainer__TZiqn"}},38:function(e,t,a){e.exports={Planet:"Planet_Planet__we8bT",active:"Planet_active__bLM0e"}},49:function(e,t,a){e.exports={Content:"Layout_Content__3H3X8"}},50:function(e,t,a){e.exports={Logo:"Logo_Logo__1N0xH"}},51:function(e,t,a){e.exports={NavigationItems:"NavigationItems_NavigationItems__1fnFX"}},54:function(e,t,a){e.exports={DrawerToggle:"DrawerToggle_DrawerToggle__m405X"}},55:function(e,t,a){e.exports={Backdrop:"Backdrop_Backdrop__3j6VK"}},56:function(e,t,a){e.exports={FormRow:"FormRow_FormRow__1T75c"}},57:function(e,t,a){e.exports={Dashboard:"Dasboard_Dashboard__25w5Z",inlineBlock:"Dasboard_inlineBlock__2nSej",PullRight:"Dasboard_PullRight__3Dmy5"}},59:function(e,t,a){e.exports={ErrorMsg:"ErrorMsg_ErrorMsg__3VfpF"}},60:function(e,t,a){e.exports={NotFound:"NotFound_NotFound__yF7tF"}},63:function(e,t,a){e.exports=a(92)},68:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),o=a.n(l),c=a(13),u=(a(68),a(19)),i=a(20),s=a(22),m=a(21),d=a(23),g=a(11),p=function(e){return e.children},f=a(49),h=a.n(f),E=a(24),_=a.n(E),v=a(50),S=a.n(v),b={NOT_FOUND:"NOT_FOUND",logoText:"SW-SEARCH",signinPlaceholder:"Enter Your Name",signInText:"Sign In",passwordPlaceholder:"Enter Your Password",liginErrorMsg:"Either username or password not matched",passwordMissmatch:"You have entered wrong password",userNameMisMatched:"You have entered wrong user name",somethingWentWrong:"Something went wrong, Please try again later!",signInProgress:"Plase Wait...",searchPlaceholder:"Search planet of StarWars!",planetName:"Planet Name",rotationPeriod:"Rotation Period",oribitalPeriod:"Orbital Period",diameter:"Diameter",climate:"Climate",gravity:"Gravity",surfaceWater:"Surface Water",terrain:"Terrain",population:"Population",planetInfo:"Planet Info",load:"Load",morePlanet:"More Planet(s)",reqLimitExceeds:"Maximum Api request limit reached. Please try after a minute."},w=function(){return r.a.createElement("div",{className:S.a.Logo},b.logoText)},N=a(51),I=a.n(N),T=a(2),O=a(29),P=a.n(O),y=a(30),x=a.n(y),D=function(e){var t=e.split("/");return t[t.length-2]},j=function(e){if("1"===(e=e||localStorage.getItem("userId")))return console.log("allowedUser"),!0;var t="USER_REQ_"+e,a=localStorage.getItem(t);if(a)if((a=JSON.parse(a)).count>=15){if(C(a.reqTime)<60)return!1;a.count=1,a.reqTime=(new Date).getTime(),localStorage.setItem(t,JSON.stringify(a))}else a.count+=1,localStorage.setItem(t,JSON.stringify(a));else{var n={id:e,reqTime:(new Date).getTime(),count:1};localStorage.setItem(t,JSON.stringify(n))}return!0},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;e=new Date(e);var a=Math.abs(e.getTime()-t.getTime());return Math.ceil(a/1e3)},L=function(e){return{success:!1,errorMsg:{1:b.userNameMisMatched,2:b.passwordMissmatch}[e]}},R=function(e){var t;localStorage.setItem("expirationDate",(t=e.expiresIn,new Date((new Date).getTime()+1e3*t))),localStorage.setItem("userId",D(e.data.url)),localStorage.setItem("userName",e.data.name)},k=function(e,t){return{type:"AUTH_SUCCESS",userId:e,userName:t}},A=function(e){return{type:"AUTH_FAIL",error:e}},M=function(e){return localStorage.removeItem("expirationDate"),localStorage.removeItem("userId"),localStorage.removeItem("userName"),"function"===typeof e&&e(),{type:"AUTH_LOGOUT"}},U=function(e){return function(t){setTimeout((function(){t(M())}),1e3*e)}},H=function(e,t){return function(a){a({type:"AUTH_START"});var n="https://swapi.co/api/people/?search="+e;x.a.get(n).then((function(n){var r=function(e,t,a){var n=a.data;if(1===n.count){var r=n.results[0],l=r.name.toLowerCase()===e.toLowerCase(),o=r.birth_year===t;if(l&&o)return{success:!0,data:r,expiresIn:3600};if(o)return L(1);if(l)return L(2)}return L(1)}(e,t,n);r.success?(R(r),a(k(r.data.id,r.data.name)),a(U(r.expiresIn))):a(A(r.errorMsg))})).catch((function(e){console.log(e),a(A(b.somethingWentWrong))}))}},W=function(e,t,a,n){return{type:"SEARCH_SUCCESS",result:e,next:t,count:a,update:n}},F=function(e){return{type:"SEARCH_FAIL",errMsg:e}},B=Object(T.b)((function(e){return{auth:e.authState}}),(function(e){return{logout:function(t){return e(M(t))}}}))((function(e){var t=Object(g.g)();return 3===e.auth?r.a.createElement("li",{className:P.a.NavigationItem},r.a.createElement("a",{href:e.link,onClick:function(a){a.preventDefault(),e.logout((function(){t.push("/"),window.location.reload()}))},className:e.active?P.a.active:null},e.children)):null})),q=function(){return r.a.createElement("ul",{className:I.a.NavigationItems},r.a.createElement(B,{link:"/",active:!0},"Logout"))},X=a(54),J=a.n(X),Y=function(e){return r.a.createElement("div",{className:J.a.DrawerToggle,onClick:e.clicked},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},Z=function(e){return r.a.createElement("header",{className:_.a.Toolbar},r.a.createElement(Y,{clicked:e.drawerToggleClicked}),r.a.createElement("div",{className:_.a.Logo},r.a.createElement(w,null)),r.a.createElement("nav",{className:_.a.DesktopOnly},r.a.createElement(q,null)))},G=a(15),V=a.n(G),K=a(55),Q=a.n(K),z=function(e){return e.show?r.a.createElement("div",{className:Q.a.Backdrop,onClick:e.clicked}):null},$=function(e){var t=[V.a.SideDrawer,V.a.Close];return e.open&&(t=[V.a.SideDrawer,V.a.Open]),r.a.createElement(p,null,r.a.createElement(z,{show:e.open,clicked:e.closed}),r.a.createElement("div",{className:t.join(" ")},r.a.createElement("div",{className:V.a.Logo},r.a.createElement(w,null)),r.a.createElement("nav",null,r.a.createElement(q,null))))},ee=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(s.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={showSideDrawer:!1},a.sideDrawerClosedHandler=function(){a.setState({showSideDrawer:!1})},a.sideDrawerToggleHandler=function(){a.setState((function(e){return{showSideDrawer:!e.showSideDrawer}}))},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(p,null,r.a.createElement(Z,{drawerToggleClicked:this.sideDrawerToggleHandler}),r.a.createElement($,{open:this.state.showSideDrawer,closed:this.sideDrawerClosedHandler}),r.a.createElement("main",{className:h.a.Content},this.props.children))}}]),t}(n.Component),te=a(62);var ae=Object(T.b)((function(e){return{auth:e.authState}}))((function(e){var t=e.component,a=e.auth,n=Object(te.a)(e,["component","auth"]);return r.a.createElement(g.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(g.a,{to:{pathname:"/"}})}}))})),ne=a(12),re=a(25),le=a.n(re),oe=a(33),ce=a.n(oe),ue=function(e){var t=e.type,a=e.onChangeHandeler,n=e.classNames,l=e.value,o=e.placeholder,c=e.inputStyle,u=e.name;t=t||"text";var i=ce.a.inputStyle;c&&(i=ce.a[c]),n=[i,n].join(" ");var s=r.a.useState(""),m=Object(ne.a)(s,2),d=m[0],g=m[1];return"function"!==typeof a&&(a=function(e){g(e.target.value)},l=d),r.a.createElement("input",{type:t,onChange:a,className:n,value:l,placeholder:o,name:u})},ie=a(34),se=a.n(ie),me=function(e){var t=e.clicked,a=e.children,n=e.btnType,l=e.type,o=e.name,c=e.disabled,u=e.style,i=e.classNames;return l=l||"button",i=i||"",r.a.createElement("button",{className:[se.a.Button,se.a[n],i].join(" "),onClick:t,type:l,style:u,name:o,disabled:c},a)},de=a(56),ge=a.n(de),pe=function(e){var t=e.children,a=e.style;return r.a.createElement("div",{className:ge.a.FormRow,style:a},t)};var fe=Object(T.b)((function(e){return{authState:e.authState,error:e.error}}),(function(e){return{onAuth:function(t,a){return e(H(t,a))},isLoggedIn:function(){return e((function(e){if(localStorage.getItem("userId")){var t=new Date(localStorage.getItem("expirationDate"));if(t<=new Date)e(M());else{var a=localStorage.getItem("userId"),n=localStorage.getItem("userName");e(k(a,n)),e(U((t.getTime()-(new Date).getTime())/1e3))}}else e(M())}))}}}))((function(e){var t=Object(n.useState)(""),a=Object(ne.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)(""),u=Object(ne.a)(c,2),i=u[0],s=u[1],m=e.isLoggedIn,d=e.authState,p=""===l||""===i||1===d;return Object(n.useEffect)((function(){m()}),[m]),3===d?r.a.createElement(g.a,{to:"/dashboard"}):r.a.createElement("div",{className:le.a.Main},r.a.createElement("p",{className:le.a.SignInText},b.signInText),r.a.createElement(w,null),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onAuth(l,i)}},r.a.createElement(pe,null,r.a.createElement(ue,{value:l,placeholder:b.signinPlaceholder,onChangeHandeler:function(e){return o(e.target.value)},name:"userName"})),r.a.createElement(pe,null,r.a.createElement(ue,{type:"password",value:i,placeholder:b.passwordPlaceholder,onChangeHandeler:function(e){return s(e.target.value)},name:"password"})),r.a.createElement(pe,null,r.a.createElement(me,{btnType:"Rounded",type:"submit",name:"login",disabled:p},1===d?b.signInProgress:b.signInText))),2===d?r.a.createElement("section",{className:le.a.error},r.a.createElement("p",null,e.error)):null)})),he=a(57),Ee=a.n(he),_e=a(35),ve=a.n(_e),Se=Object(T.b)((function(e){return{selectedPlanet:e.selectedPlanet}}))((function(e){var t=e.selectedPlanet;return r.a.createElement("section",{className:ve.a.PlanetInfo},r.a.createElement("h1",null,b.planetInfo),!1!==t?r.a.createElement("div",{className:ve.a.InfoWrapper},r.a.createElement("div",null,r.a.createElement("h1",null,b.planetName," : ",t.name)),r.a.createElement("div",null,r.a.createElement("b",null,b.rotationPeriod)," : ",t.rotation_period),r.a.createElement("div",null,r.a.createElement("b",null,b.oribitalPeriod),": ",t.orbital_period),r.a.createElement("div",null,r.a.createElement("b",null,b.diameter)," : ",t.diameter),r.a.createElement("div",null,r.a.createElement("b",null,b.climate)," : ",t.climate),r.a.createElement("div",null,r.a.createElement("b",null,b.gravity," "),": ",t.gravity),r.a.createElement("div",null,r.a.createElement("b",null,b.surfaceWater," "),": ",t.surface_water),r.a.createElement("div",null,r.a.createElement("b",null,b.terrain),": ",t.terrain),r.a.createElement("div",null,r.a.createElement("b",null,b.population)," : ",t.population)):null)})),be=a(58),we=a(36),Ne=a.n(we),Ie=function(e){return e.loading?r.a.createElement("h1",null,"Loading"):null},Te=a(37),Oe=a.n(Te),Pe=a(38),ye=a.n(Pe),xe=Object(T.b)(null,(function(e){return{onSelectPlanet:function(t){return e({type:"SELECT_PLANET",selectedPlanet:t})}}}))((function(e){var t=e.data,a=e.onSelectPlanet,n=e.isSelected,l=[ye.a.Planet];n&&l.push(ye.a.active);var o=14;return"unknown"!==t.population&&(o+=t.population.length),r.a.createElement("div",{className:l.join(" "),onClick:function(){return a(t)},style:{fontSize:o}},t.name)})),De=function(e){var t=e.data,a=e.count,n=e.nextUrl,l=e.fetchPlanet,o=e.selectedPlanet;if(console.log(t,a,n),0===t.length)return null;var c="";o&&(c=D(o.url));var u=a-t.length;return r.a.createElement("section",{className:Oe.a.SearchResult},r.a.createElement("div",null,t.map((function(e){var t=D(e.url);return r.a.createElement(xe,{key:D(e.url),data:e,isSelected:t===c})}))),r.a.createElement("div",{className:Oe.a.MoreContainer},n&&r.a.createElement(me,{btnType:"AutoWidth",style:{width:"76%",height:"40px"},clicked:function(){return l(n,!0)}},b.load," ",u," ",b.morePlanet)))},je=a(59),Ce=a.n(je),Le=function(e){var t=e.isError,a=e.msg,n=void 0===a?b.somethingWentWrong:a;return t?r.a.createElement("div",{className:Ce.a.ErrorMsg},n):null},Re=Object(T.b)((function(e){return{loading:e.loading,searchError:e.searchError,searchResult:e.searchResult,nextUrl:e.nextUrl,count:e.count,selectedPlanet:e.selectedPlanet}}),(function(e){return{fetchPlanet:function(t,a){return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return""===e?function(e){e(W([],null,0,t))}:function(a){a({type:"SEARCH_START"});var n="https://swapi.co/api/planets/?search="+e;!1===j()?a(F(b.reqLimitExceeds)):(t&&(n=e),x.a.get(n).then((function(e){var n=e.data;a(W(n.results,n.next,n.count,t))})).catch((function(e){console.log(e),a(F(b.somethingWentWrong))})))}}(t,a))}}}))((function(e){var t=e.fetchPlanet,a=e.loading,l=e.searchError,o=e.searchResult,c=e.nextUrl,u=e.count,i=e.selectedPlanet,s=Object(n.useState)(""),m=Object(ne.a)(s,2),d=m[0],g=m[1],p=Object(be.debounce)(t,1e3),f=Object(n.useCallback)((function(e){g(e.target.value),p(e.target.value)}),[]);return r.a.createElement("section",{className:Ne.a.Search},r.a.createElement("div",{className:Ne.a.InputWraper},r.a.createElement(ue,{value:d,onChangeHandeler:f,placeholder:b.searchPlaceholder}),r.a.createElement(Ie,{loading:a}),r.a.createElement(Le,{isError:l,msg:l})),r.a.createElement(De,{data:o,count:u,nextUrl:c,fetchPlanet:t,selectedPlanet:i}))}));var ke=function(e){return r.a.createElement("section",{className:Ee.a.Dashboard},r.a.createElement(Re,null),r.a.createElement(Se,null))},Ae=a(60),Me=a.n(Ae);var Ue=function(e){return r.a.createElement("div",{className:Me.a.NotFound},r.a.createElement("h1",null,"404"))},He=function(e){function t(){return Object(u.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ee,null,r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",component:fe}),r.a.createElement(ae,{exact:!0,path:"/dashboard",component:ke}),r.a.createElement(g.b,{component:Ue}))))}}]),t}(n.Component),We=a(39),Fe=a(10),Be={authState:0,loading:!1,error:!1,userId:"",userName:"",nextUrl:null,count:0,searchResult:[],searchError:!1,selectedPlanet:!1},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_FAIL":return Object(Fe.a)({},e,{authState:2,error:t.error});case"AUTH_START":return Object(Fe.a)({},e,{authState:1});case"AUTH_SUCCESS":return Object(Fe.a)({},e,{authState:3,userId:t.userId,userName:t.userName,error:!1});case"AUTH_LOGOUT":return Object(Fe.a)({},e,{authState:0,userId:"",userName:""});case"SEARCH_START":return Object(Fe.a)({},e,{loading:!0});case"SEARCH_SUCCESS":return Object(Fe.a)({},e,{count:t.count,nextUrl:t.next,searchResult:t.update?[].concat(Object(We.a)(e.searchResult),Object(We.a)(t.result)):t.result,loading:!1,searchError:!1,selectedPlanet:!1});case"SEARCH_FAIL":return Object(Fe.a)({},e,{count:0,nextUrl:null,searchResult:[],loading:!1,searchError:t.errMsg,selectedPlanet:!1});case"SELECT_PLANET":return Object(Fe.a)({},e,{selectedPlanet:t.selectedPlanet});default:return e}},Xe=a(14),Je=a(61),Ye=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Xe.c,Ze=Object(Xe.d)(qe,Ye(Object(Xe.a)(Je.a))),Ge=r.a.createElement(T.a,{store:Ze},r.a.createElement(c.a,null,r.a.createElement(He,null)));o.a.render(Ge,document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.0f1895f1.chunk.js.map